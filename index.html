<!DOCTYPE html>
<html>
<head>
	<title>GIF AR Page</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
	<script src="https://cdn.rawgit.com/google-ar/three.ar.js/master/build/three.ar.js"></script>
	<style>
		canvas {
			position: absolute;
			top: 0;
			left: 0;
			height: 100%;
			width: 100%;
		}
	</style>
</head>
<body>
	<h1>Welcome to QUIRIN GIF AR page!</h1>
	<p>Check out this awesome GIF in AR:</p>
	<script>
		// create the three.js scene
		var scene = new THREE.Scene();
		var camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
		var renderer = new THREE.WebGLRenderer({ alpha: true });
		renderer.setPixelRatio(window.devicePixelRatio);
		renderer.setSize(window.innerWidth, window.innerHeight);
		document.body.appendChild(renderer.domElement);

		// create the AR light
		var light = new THREE.AmbientLight(0xffffff, 1);
		scene.add(light);

		// create the AR object
		var object = null;
		var loader = new THREE.GLTFLoader();
		loader.load('https://media.tenor.com/cI3eAVLXj48AAAAC/hello-world.glb', function (gltf) {
			object = gltf.scene;
			scene.add(object);
		});

		// create the AR session
		var xrSession = null;
		var xrButton = document.createElement('button');
		xrButton.textContent = 'Enter AR';
		xrButton.addEventListener('click', function () {
			if (!xrSession) {
				navigator.xr.requestDevice('AR', { requiredFeatures: ['hit-test'] })
					.then(function (device) {
						return device.requestSession({ requiredFeatures: ['hit-test'] });
					})
					.then(function (session) {
						xrSession = session;
						xrButton.textContent = 'Exit AR';
						xrSession.addEventListener('end', function () {
							xrSession = null;
							xrButton.textContent = 'Enter AR';
						});
						renderer.xr.setSession(xrSession);
					})
					.catch(function (error) {
						console.error(error);
					});
			} else {
				xrSession.end();
			}
		});
		document.body.appendChild(xrButton);

		// handle hit test results
		function handleHitTestResults(results) {
			if (results.length > 0) {
				var hitPose = results[0].getPose(scene.children[0]);
				if (hitPose) {
					object.visible = true;
					object.position.set(hitPose.transform.position.x, hitPose.transform.position.y, hitPose.transform.position.z);
					object.quaternion.set(hitPose.transform.orientation.x, hitPose.transform.orientation.y, hitPose.transform.orientation.z, hitPose.transform.orientation.w);
				}
			} else {
				object.visible = false;
			}
		}

		// start the render loop
		function render() {
			if (xrSession) {
				var xrFrame = renderer.xr.getFramebuffer();
				var xrViewport = xrSession.renderState.baseLayer.getViewport(xrFrame.views[0]);
				camera.projectionMatrix.fromArray(xrFrame.views[0].projectionMatrix);
				renderer.setSize(xrViewport.width, xrViewport.height);
				xrSession.requestHit
